<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>TFM Player</title>
    <script>
      // Single Page Apps for GitHub Pages
      // https://github.com/rafgraph/spa-github-pages
      // This script takes the current url and converts the path and query
      // string into just a query string, and then redirects the browser
      // to the new url with only a query string and hash fragment,
      // e.g. https://mateof.github.io/TFMPlayer/downloads becomes
      // https://mateof.github.io/TFMPlayer/?p=/downloads

      var pathSegmentsToKeep = 1; // Keep /TFMPlayer/
      var l = window.location;

      // Get the path after the base (e.g., /downloads from /TFMPlayer/downloads)
      var repo = l.pathname.split('/').slice(0, pathSegmentsToKeep + 1).join('/');
      var path = l.pathname.slice(repo.length) || '/';

      // Redirect to base with path as query parameter
      l.replace(
        l.protocol + '//' + l.hostname + (l.port ? ':' + l.port : '') +
        repo + '/?p=' + encodeURIComponent(path + l.search) +
        l.hash
      );
    </script>
  </head>
  <body>
  </body>
</html>
